/*
   Name: SPUtility.js
   Version: 0.14.2
   Built: 2017-08-25
   Author: Kit Menke
   https://sputility.codeplex.com/
   Copyright (c) 2017
   License: The MIT License (MIT)
*/
Object.create||(Object.create=function(a){function b(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return b.prototype=a,new b});var SPUtility=function(a){"use strict";function b(){return null===_&&(_=a("table.ms-formtoolbar input[value='Close']").length>=1),_}function c(){return navigator.userAgent.toLowerCase().indexOf("msie")>=0}function d(a){return"undefined"==typeof a}function e(a){return"string"==typeof a}function f(a){return"number"==typeof a}function g(a){return parseInt(a,10)}function h(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function i(a,b,c){return a.replace(new RegExp(h(b),"g"),c)}function j(a){return"string"==typeof a&&(a=i(a," ",""),a=i(a,ba.thousandsSeparator,""),a=a.replace(ba.decimalSeparator,"."),a=parseFloat(a)),a}function k(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/''/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(a,b,c){if(a.length>=c)return a;for(;a.length<c;)a=b+a;return a}function m(){return 15===aa}function n(a,b,c,d){b=isNaN(b=Math.abs(b))?2:b,c=void 0===c?ba.decimalSeparator:c,d=void 0===d?ba.thousandsSeparator:d;var e=a<0?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b),10)+"",g=(g=f.length)>3?g%3:0;return e+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")}function o(a,b){if("function"==typeof a.format)return a.format(b);var c=["January","February","March","April","May","June","July","August","September","October","November","December"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=b.split(""),f=0,g=b.length-1,h=[];e.forEach(function(a,c){0!==c&&(e[c-1]===a?c===g&&h.push(b.substr(f)):(h.push(b.substr(f,c-f)),f=c))});var i=a.getFullYear(),j=a.getMonth(),k=a.getDate(),m=a.getDay(),n=a.getHours(),o=a.getMinutes(),p=a.getSeconds(),q=l(String(a.getMilliseconds()),"0",7),r=h.map(function(a){switch(a){case"y":return String(+String(i).slice(-2));case"yy":return String(i).slice(-2);case"yyy":return String(i).slice(-3);case"yyyy":return String(i).slice(-4);case"M":return String(j+1);case"MM":return l(String(j+1),"0",2);case"MMM":return c[j].slice(0,3);case"MMMM":return c[j];case"d":return String(k);case"dd":return l(String(k),"0",2);case"ddd":return d[m].slice(0,3);case"dddd":return d[m];case"h":return String(n>12?n-12:n);case"hh":return l(String(n>12?n-12:n),"0",2);case"H":return String(n);case"HH":return l(String(n),"0",2);case"m":return String(o);case"mm":return l(String(o),"0",2);case"s":return String(p);case"ss":return l(String(p),"0",2);case"f":return q.slice(0,1);case"ff":return q.slice(0,2);case"fff":return q.slice(0,3);case"ffff":return q.slice(0,4);case"fffff":return q.slice(0,5);case"ffffff":return q.slice(0,6);case"fffffff":return q.slice(0,7);case"F":return"0"===q.slice(0,1)?"":q.slice(0,1);case"FF":return 0===+q.slice(0,2)?"":+q.slice(0,2);case"FFF":return 0===+q.slice(0,3)?"":+q.slice(0,3);case"FFFF":return 0===+q.slice(0,4)?"":+q.slice(0,4);case"FFFFF":return 0===+q.slice(0,5)?"":+q.slice(0,5);case"FFFFFF":return 0===+q.slice(0,6)?"":+q.slice(0,6);case"FFFFFFF":return 0===+q.slice(0,7)?"":+q.slice(0,7);default:return a}});return r.join("")}function p(a){var b="object"==typeof _spPageContextInfo?_spPageContextInfo.currentCultureName:"en-US",c={"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"};return o(a,c[b])}function q(b){if(null===b.Controls)return null;var c=a(b.Controls).find("input");if(null!==c&&1===c.length)return c[0];throw"Unable to retrieve the input control for "+b.Name}function r(b,c){var d,e=[],f=a(b.Controls).find(c),g=a(b.Controls).find("label");if(g.length<f.length)throw"Unable to get hashtable of controls.";for(d=0;d<f.length;d++)e.push({key:a(g[d]).text(),value:f[d]});return e}function s(b,c){var d=null;return a(b).each(function(a,b){if(b.key===c)return d=b.value,!1}),d}function t(b,c){for(var e=0;e<b.childNodes.length;e+=1)if(8===b.childNodes[e].nodeType){var f=b.childNodes[e].data,g=f.match(/SPField\w+/);null!==g&&g.length>0&&(c.type=g[0]);var h=f.match(/FieldName="[^"]+/);null!==h&&h.length>0&&(c.name=h[0].substring(11));var i=f.match(/FieldInternalName="\w+/);null!==i&&i.length>0&&(c.internalName=i[0].substring(19));break}if(null===c.type){var j=a(b).children("span").children().first();"INPUT"===j.prop("tagName")&&j.attr("id").match(/TextField$/)?d(j.attr("maxlength"))?d(j.attr("size"))||(c.type="SPFieldNumber",c.internalName=c.name):(c.type="SPFieldText",c.internalName=c.name):a(b).find("select[name$=ContentTypeChoice]").length>0&&(c.type="ContentTypeChoice",c.internalName="ContentType",c.name="Content Type")}}function u(b){var c=null,d=null,e=null,f=a(b).siblings(".ms-formlabel");if(null!==f){var g=f.children("h3");c=g.length>0?g[0]:f,null!==c&&"NOBR"!==c.nodeName&&(e=a.trim(a(c).text()),e.length>2&&" *"===e.substring(e.length-2)&&(d=!0,e=e.substring(0,e.length-2)))}var h={name:e,internalName:null,label:null!==c?a(c):null,labelRow:null!==c?c.parentNode:null,labelCell:f,isRequired:d,controlsRow:b.parentNode,controlsCell:b,type:null,spField:null};return t(b,h),h}function v(){if(null===Z||null===$){"object"==typeof _spPageContextInfo&&(aa=15===_spPageContextInfo.webUIVersion?15:14),Z={},$={};for(var b=a("table.ms-formtable td.ms-formbody"),c=0;c<b.length;c+=1){var d=u(b[c]);null!==d&&(Z[d.name]=d,$[d.internalName]=d)}}}function w(b,c,d){d?(null!==b&&a(b).show(),a(c).show()):(null!==b&&a(b).hide(),a(c).hide())}function x(a,b){v();var c=Z[a];if(d(c))throw"toggleSPField: Unable to find a SPField named "+a+" - "+b;w(c.labelRow,c.controlsRow,b)}function y(b){this.Label=b.label,this.LabelRow=b.labelRow,this.Name=b.name,this.InternalName=b.internalName,this.IsRequired=b.isRequired,this.Type=b.type;var c=a(b.controlsCell).children("span[dir]");c.length>0?this.Controls=c[0]:this.Controls=null,this.ControlsRow=b.controlsRow,this.ReadOnlyLabel=null}function z(a){y.call(this,a),this.Textbox=q(this)}function A(a){z.call(this,a)}function B(a){A.call(this,a),this.FormatOptions={eventHandler:null,autoCorrect:!1,decimalPlaces:2}}function C(b){y.call(this,b);var c=a(b.controlsCell).children("select[name$=ContentTypeChoice]");0!==c.length&&(this.Controls=this.Dropdown=c[0])}function D(b){if(y.call(this,b),null!==this.Controls){var c=a(this.Controls).find("input"),d=c.length;d>1&&"text"===c[d-1].type?(this.FillInTextbox=c[d-1],this.FillInElement=c[d-2],this.FillInAllowed=!0):(this.FillInAllowed=!1,this.FillInTextbox=null,this.FillInElement=null)}}function E(a,b){D.call(this,a),null!==this.Controls&&(this.Dropdown=b,this.Dropdown=1===this.Dropdown.length?this.Dropdown[0]:[])}function F(a){D.call(this,a),null!==this.Controls&&(this.RadioButtons=r(this,'input[type="radio"]'),this.FillInAllowed&&this.RadioButtons.pop())}function G(a){D.call(this,a),null!==this.Controls&&(this.Checkboxes=r(this,'input[type="checkbox"]'),this.FillInAllowed&&(this.FillInElement=this.Checkboxes.pop().value))}function H(a,b,c,e,f,g,h){this.Year=null,this.Month=null,this.Day=null,this.IsTimeIncluded=!1,this.Hour=null,this.Minute=null,this.TimeFormat=null,this.DateSeparator=null,d(a)||d(b)||d(c)||(this.SetDate(a,b,c),d(e)||d(f)||(this.SetTime(e,f),d(g)||(this.TimeFormat=g,d(h)||(this.DateSeparator=h))))}function I(b){if(y.call(this,b),this.DateTextbox=q(this),this.HourDropdown=null,this.MinuteDropdown=null,this.IsDateOnly=!0,this.HourValueFormat=null,null!==this.Controls){var c=a(this.Controls).find("select");null!==c&&2===c.length&&(this.HourDropdown=c[0],a(this.HourDropdown).val().indexOf(" ")>-1?this.HourValueFormat="string":this.HourValueFormat="number",this.MinuteDropdown=c[1],this.IsDateOnly=!1)}}function J(a){y.call(this,a),this.Checkbox=q(this)}function K(b){if(y.call(this,b),null!==this.Controls){this.TextboxURL=null,this.TextboxDescription=null,this.TextOnly=!1;var c=a(this.Controls).find("input");null!==c&&2===c.length&&(this.TextboxURL=a(c[0]),this.TextboxDescription=a(c[1]))}}function L(a,b){if(y.call(this,a),null!==this.Controls){if(1!==b.length)throw"Unable to get dropdown element for "+this.Name;this.Dropdown=b[0]}}function M(b,c){if(y.call(this,b),null!==this.Controls){if(1!==c.length)throw"Unable to get input elements for "+this.Name;this.Textbox=a(c[0]),this.HiddenTextbox=a('input[id="'+this.Textbox.attr("optHid")+'"]')}}function N(a,b){y.call(this,a),this.Textbox=b,this.TextType="Plain"}function O(a,b){N.call(this,a,b),this.TextType="Rich"}function P(b,c){y.call(this,b),this.Textbox=c[0],this.ContentDiv=a(this.Controls).find('div[contenteditable="true"]')[0],this.TextType="Enhanced"}function Q(b){z.call(this,b),this.FileExtension=a(this.Textbox).parent().text()}function R(b){if(y.call(this,b),null!==this.Controls){var c=a(this.Controls).find("select");if(2!==c.length)throw"Error initializing SPLookupMultiField named "+this.Name+", unable to get select controls.";this.ListChoices=c[0],this.ListSelections=c[1],c=a(this.Controls).find("button"),0===c.length&&(c=a(this.Controls).find('input[type="button"]')),this.ButtonAdd=c[0],this.ButtonRemove=c[1]}}function S(b){if(y.call(this,b),null!==this.Controls){this.spanUserField=null,this.upLevelDiv=null,this.textareaDownLevelTextBox=null,this.linkCheckNames=null,this.txtHiddenSpanData=null;var c=a(this.Controls).find("span.ms-usereditor");null!==c&&1===c.length&&(this.spanUserField=c[0],this.upLevelDiv=byid(this.spanUserField.id+"_upLevelDiv"),this.textareaDownLevelTextBox=byid(this.spanUserField.id+"_downlevelTextBox"),this.linkCheckNames=byid(this.spanUserField.id+"_checkNames"),this.txtHiddenSpanData=byid(this.spanUserField.id+"_hiddenSpanData"))}}function T(b){if(y.call(this,b),this.Controls=b.controlsCell,null!==this.Controls){var c=a(this.Controls).find(".sp-peoplepicker-topLevel")[0];this.ClientPeoplePicker=window.SPClientPeoplePicker.SPClientPeoplePickerDict[a(c).attr("id")],this.EditorInput=a(this.Controls).find("[id$='_EditorInput']")[0];var d=this;this.ClientPeoplePicker.OnUserResolvedClientScript=function(a,b){"function"==typeof d.UserResolvedCallBack&&d.UserResolvedCallBack(b)}}}function U(b){if(y.call(this,b),this.Controls=b.controlsCell,null!==this.Controls){this.ClientTaxonomyWebTaggingControl=null;var c=a(this.Controls).find("div[id='"+b.internalName+"_$container']")[0];c&&"object"==typeof Microsoft&&"object"==typeof Microsoft.SharePoint&&"object"==typeof Microsoft.SharePoint.Taxonomy&&(this.ClientTaxonomyWebTaggingControl=new Microsoft.SharePoint.Taxonomy.ControlObject(c))}}function V(a,b){y.call(this,a),this.Controls=a.controlsCell,this.TextNode=b}function W(a,b){y.call(this,a),this.Controls=a.controlsCell,this.Element=b}function X(c){var d,e=null;if(b())return d=c.controlsCell.childNodes,5===d.length?new W(c,d[3]):new V(c,d[2]);switch(c.type){case"SPFieldText":e=new z(c);break;case"SPFieldNumber":e=new A(c);break;case"SPFieldCurrency":e=new B(c);break;case"ContentTypeChoice":e=new C(c);break;case"SPFieldChoice":d=a(c.controlsCell).find("select"),e=d.length>0?new E(c,d):new F(c);break;case"SPFieldMultiChoice":e=new G(c);break;case"SPFieldDateTime":e=new I(c);break;case"SPFieldBoolean":e=new J(c);break;case"SPFieldUser":case"SPFieldUserMulti":case"SPFieldBusinessData":e="undefined"==typeof window.SPClientPeoplePicker?new S(c):new T(c);break;case"SPFieldURL":e=new K(c);break;case"SPFieldLookup":d=a(c.controlsCell).find("select"),d.length>0?e=new L(c,d):(d=a(c.controlsCell).find("input"),e=new M(c,d));break;case"SPFieldNote":d=a(c.controlsCell).find("textarea"),d.length>0?(d=d[0],window.RTE_GetEditorIFrame&&null!==window.RTE_GetEditorIFrame(d.id)&&(e=new O(c,d))):(d=a(c.controlsCell).find('input[type="hidden"]'),d.length>=1&&(e=new P(c,d))),null===e&&(e=new N(c,d));break;case"SPFieldFile":e=new Q(c);break;case"SPFieldLookupMulti":e=new R(c);break;case"SPFieldTaxonomyFieldType":case"SPFieldTaxonomyFieldTypeMulti":e=new U(c);break;default:e=new y(c)}return e}function Y(a){try{if(null===a.type)throw"Unknown SPField type.";return X(a)}catch(b){throw"Error creating field named "+a.name+": "+b.toString()}}var Z=null,$=null,_=null,aa=12,ba={timeFormat:"12HR",dateSeparator:"/",dateFormat:"MM/dd/yyyy",dateTimeFormat:"MM/dd/yyyy HH:mm:ss",decimalSeparator:".",thousandsSeparator:",",stringYes:"Yes",stringNo:"No",termSeparator:";",termLabelSeparator:"|"};y.prototype.Show=function(){return w(this.LabelRow,this.ControlsRow,!0),this},y.prototype.Hide=function(){return w(this.LabelRow,this.ControlsRow,!1),this},y.prototype.GetDescription=function(){if(m())return a(this.Controls.parentNode).children("span.ms-metadata").text();var b=this.Controls.parentNode,c=a(a(b).contents().toArray().reverse()).filter(function(){return 3===this.nodeType}).text();return c.replace(/^\s+/,"").replace(/\s+$/g,"")},y.prototype.MakeRequired=function(){if(!this.IsRequired){var b=this.Label.children("nobr");0===b.children("span.ms-accentText").length&&a("<span class='ms-accentText' title='This is a required field.'> *</span>").appendTo(b)}},y.prototype.SetDescription=function(b){var c;if(b=d(b)?"":b,m())c=a(this.Controls.parentNode).children("span.ms-metadata"),0===c.length&&(c=a('<span class="ms-metadata"/>'),a(this.Controls.parentNode).append(c)),a(c).html(b);else{c=this.Controls.parentNode;var e=a(a(c).contents().toArray().reverse()).filter(function(){return 3===this.nodeType});0===e.length?(e=document.createTextNode(b),c.appendChild(e)):a(e)[0].nodeValue=b}},y.prototype._updateReadOnlyLabel=function(a){this.ReadOnlyLabel&&this.ReadOnlyLabel.html(a)},y.prototype._makeReadOnly=function(b){try{a(this.Controls).hide(),null===this.ReadOnlyLabel&&(this.ReadOnlyLabel=a("<div/>").addClass("sputility-readonly"),a(this.Controls).after(this.ReadOnlyLabel)),this.ReadOnlyLabel.html(b),this.ReadOnlyLabel.show()}catch(c){throw"Error making "+this.Name+" read only. "+c.toString()}return this},y.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValue().toString())},y.prototype.MakeEditable=function(){try{a(this.Controls).show(),null!==this.ReadOnlyLabel&&a(this.ReadOnlyLabel).hide()}catch(b){throw"Error making "+this.Name+" editable. "+b.toString()}return this},y.prototype.toString=function(){return this.Name},y.prototype.GetValue=function(){throw"GetValue not yet implemented for "+this.Type+" in "+this.Name},y.prototype.SetValue=function(){throw"SetValue not yet implemented for "+this.Type+" in "+this.Name},z.prototype=Object.create(y.prototype),z.prototype.GetValue=function(){return a(this.Textbox).val()},z.prototype.SetValue=function(b){return a(this.Textbox).val(b),this._updateReadOnlyLabel(this.GetValue().toString()),this},z.prototype.MakeReadOnly=function(){return this._makeReadOnly(k(this.GetValue()))},A.prototype=Object.create(z.prototype),A.prototype.GetValue=function(){return j(a(this.Textbox).val())},A.prototype.SetValue=function(b){return a(this.Textbox).val(b),this._updateReadOnlyLabel(this.GetValueString()),this},A.prototype.GetValueString=function(){var a=this.GetValue();return a=isNaN(a)?"":n(a,0).toString()},A.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValueString())},B.prototype=Object.create(A.prototype),B.prototype.Format=function(){this.FormatOptions.autoCorrect?(this.FormatOptions.eventHandler=a.proxy(function(){this.SetValue(this.GetFormattedValue())},this),a(this.Textbox).on("change",this.FormatOptions.eventHandler),this.FormatOptions.eventHandler()):this.FormatOptions.eventHandler&&(a(this.Textbox).off("change",this.FormatOptions.eventHandler),this.FormatOptions.eventHandler=null)},B.prototype.GetFormattedValue=function(){var a=this.GetValue();return"number"==typeof a&&(a=n(a,this.FormatOptions.decimalPlaces)),a},B.prototype.SetValue=function(b){return a(this.Textbox).val(b),this._updateReadOnlyLabel(this.GetFormattedValue()),this},B.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetFormattedValue())},C.prototype=Object.create(y.prototype),C.prototype.GetValue=function(){return this.Dropdown.options[this.Dropdown.selectedIndex].text},C.prototype.SetValue=function(a){var b,c,d;for(c=this.Dropdown.options,b=0;b<c.length;b+=1)if(d=c[b],d.text===a||d.value===a){this.Dropdown.selectedIndex=b,"function"==typeof ChangeContentType&&ChangeContentType(this.Dropdown.id);break}return this._updateReadOnlyLabel(this.GetValue()),this},D.prototype=Object.create(y.prototype),D.prototype._getFillInValue=function(){return a(this.FillInTextbox).val()},D.prototype._setFillInValue=function(b){this.FillInElement.checked=!0,a(this.FillInTextbox).val(b)},E.prototype=Object.create(D.prototype),E.prototype.GetValue=function(){return this.FillInAllowed&&this.FillInElement.checked===!0?this._getFillInValue():a(this.Dropdown).val()},E.prototype.SetValue=function(b){var c=a(this.Dropdown).find('option[value="'+b+'"]').length>0;if(!c&&this.FillInAllowed)c?(a(this.Dropdown).val(b),this.FillInElement.checked=!1):this._setFillInValue(b);else{if(!c)throw"Unable to set value for "+this.Name+' the value "'+b+'" was not found.';a(this.Dropdown).val(b)}return this._updateReadOnlyLabel(this.GetValue().toString()),this},F.prototype=Object.create(D.prototype),F.prototype.GetValue=function(){var b=null;return a(this.RadioButtons).each(function(a,c){var d=c.value;if(d.checked)return b=c.key,!1}),this.FillInAllowed&&null===b&&this.FillInElement.checked===!0&&(b=a(this.FillInTextbox).val()),b},F.prototype.SetValue=function(a){var b=s(this.RadioButtons,a);if(null===b){if(!this.FillInAllowed)throw"Unable to set value for "+this.Name+' the value "'+a+'" was not found.';this._setFillInValue(a)}else b.checked=!0;return this._updateReadOnlyLabel(this.GetValue().toString()),this},F.prototype.MakeReadOnly=function(){return this._makeReadOnly((this.GetValue()||"").toString())},G.prototype=Object.create(D.prototype),G.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValue().join("; "))},G.prototype.GetValue=function(){var b=[];return a(this.Checkboxes).each(function(a,c){var d=c.value;d.checked&&b.push(c.key)}),this.FillInAllowed&&this.FillInElement.checked===!0&&b.push(a(this.FillInTextbox).val()),b},G.prototype.SetValue=function(b,c){var e=s(this.Checkboxes,b);if(c=!!d(c)||c,null===e){if(!this.FillInAllowed)throw"Unable to set value for "+this.Name+' the value "'+b+'" was not found.';e=this.FillInElement,a(this.FillInTextbox).val(b),e.checked=c}else e.checked=c;return this._updateReadOnlyLabel(this.GetValue().join("; ")),this},H.prototype.SetDate=function(a,b,c){if(e(a)&&(a=g(a)),e(b)&&(b=g(b)),e(c)&&(c=g(c)),!f(a)||!f(b)||!f(c))throw"Unable to set date, invalid arguments (requires year, month, and day as integers).";this.Year=a,this.Month=b,this.Day=c},H.prototype.SetTime=function(a,b){if(this.IsTimeIncluded=!1,f(a)){if(a<0||a>23)throw"Hour number parameter must be between 0 and 23.";this.Hour=a}else if(e(a)){if(!this.IsValidHour(a))throw'Hour string parameter must be formatted like "1 PM" or "12 AM".';this.Hour=this.ConvertHourToNumber(a)}if(f(b)){if(b<0||b>=60||b%5!==0)throw"Minute parameter is not in the correct format. Needs to be formatted like 0, 5, or 35.";this.Minute=b}else if(e(b)){if(!this.IsValidMinute(b))throw'Minute parameter is not in the correct format. Needs to be formatted like "00", "05" or "35".';this.Minute=g(b)}this.IsTimeIncluded=!0},H.prototype.IsValidDate=function(){return null!==this.Year&&null!==this.Month&&null!==this.Day},H.prototype.IsValidHour=function(a){return!d(a)&&/^([1-9]|10|11|12) (AM|PM)$/.test(a)},H.prototype.IsValidMinute=function(a){return!d(a)&&/^([0-5](0|5))$/.test(a)},H.prototype.ConvertHourToNumber=function(a){var b;return a=a.split(" "),b=g(a[0]),"AM"===a[1]?12===b&&(b=0):"PM"===a[1]&&(b+=12),b},H.prototype.PadWithZero=function(a){return d(a)||null===a?"":e(a)&&(a=g(a),isNaN(a))?"":f(a)&&a<10?"0"+a.toString():a.toString()},H.prototype.GetShortDateString=function(){return this.IsValidDate()?p(new Date(this.Year,this.Month-1,this.Day)):""},H.prototype.GetHour=function(){var a=this.Hour;return"12HR"===this.TimeFormat&&(0===a?a=12:a>12&&(a-=12)),a},H.prototype.GetShortTimeString=function(){return this.IsTimeIncluded?"12HR"===this.TimeFormat?this.GetHour()+":"+this.PadWithZero(this.Minute)+(this.Hour<12?" AM":" PM"):this.PadWithZero(this.GetHour())+":"+this.PadWithZero(this.Minute):""},H.prototype.toString=function(){var a=this.GetShortDateString(),b=this.GetShortTimeString();return""===a&&""===b?"":""===a?"":""===b?a:a+" "+b},I.prototype=Object.create(y.prototype),I.prototype.GetValue=function(){var a=this.GetRawValue(),b=new Date(a),c=new H;return c.TimeFormat=ba.timeFormat,c.DateSeparator=ba.dateSeparator,a.length>0&&"Invalid Date"!==b.toString()&&(c.SetDate(b.getFullYear(),b.getMonth()+1,b.getDate()),this.IsDateOnly||c.SetTime(b.getHours(),b.getMinutes())),c},I.prototype.GetRawValue=function(){var b=a(this.DateTextbox).val();return this.IsDateOnly||(b+=" "+g(a(this.HourDropdown).val())+":"+a(this.MinuteDropdown).val()),b},I.prototype.SetValue=function(a,b,c,e,f){return d(a)||null===a||""===a?(this.SetDate(null),this.IsDateOnly||this.SetTime(null),this):(this.SetDate(a,b,c),d(e)||d(f)||this.SetTime(e,f),this)},I.prototype.SetDate=function(b,c,d){if(null===b||""===b)return a(this.DateTextbox).val(""),this;var e=new H;return e.TimeFormat=ba.timeFormat,e.DateSeparator=ba.dateSeparator,e.SetDate(b,c,d),a(this.DateTextbox).val(e.GetShortDateString()),this._updateReadOnlyLabel(this.GetValue().toString()),this},I.prototype.SetTime=function(b,c){if(this.IsDateOnly)throw"Unable to set the time for a Date only field.";var d=new H;if(d.TimeFormat=ba.timeFormat,d.DateSeparator=ba.dateSeparator,null===b||""===b?d.SetTime(0,0):d.SetTime(b,c),"string"===this.HourValueFormat){var e;e=0===d.Hour?"12 AM":12===d.Hour?"12 PM":d.Hour>12?(d.Hour-12).toString()+" PM":d.Hour.toString()+" AM",a(this.HourDropdown).val(e)}else a(this.HourDropdown).val(d.Hour);return a(this.MinuteDropdown).val(d.PadWithZero(d.Minute)),this._updateReadOnlyLabel(this.GetValue().toString()),this},J.prototype=Object.create(y.prototype),J.prototype.GetValue=function(){return!!this.Checkbox.checked},J.prototype.GetValueString=function(){return this.GetValue()?ba.stringYes:ba.stringNo},J.prototype.SetValue=function(a){return a=e(a)?ba.stringYes.toUpperCase()===a.toUpperCase():!!a,this.Checkbox.checked=a,this._updateReadOnlyLabel(this.GetValueString()),this},J.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValueString())},K.prototype=Object.create(y.prototype),K.prototype.GetValue=function(){return[this.TextboxURL.val(),this.TextboxDescription.val()]},K.prototype.SetValue=function(a,b){return this.TextboxURL.val(a),this.TextboxDescription.val(b),this._updateReadOnlyLabel(this.GetHyperlink()),this},K.prototype.GetHyperlink=function(){var a,b=this.GetValue();return a=this.TextOnly?b[0]+", "+b[1]:'<a href="'+b[0]+'">'+b[1]+"</a>"},K.prototype.MakeReadOnly=function(a){return a&&!0===a.TextOnly&&(this.TextOnly=!0),this._makeReadOnly(this.GetHyperlink())},L.prototype=Object.create(y.prototype),L.prototype.GetValue=function(){return this.Dropdown.options[this.Dropdown.selectedIndex].text},L.prototype.SetValue=function(b){if(f(b))a(this.Dropdown).val(b);else{var c,d,e;for(d=this.Dropdown.options,c=0;c<d.length;c+=1)if(e=d[c],e.text===b){this.Dropdown.selectedIndex=c;break}}return this._updateReadOnlyLabel(this.GetValue()),this},M.prototype=Object.create(y.prototype),M.prototype.GetValue=function(){return this.Textbox.val()},M.prototype.SetValue=function(a){var b,c,d,f,h,i=[];for(b=this.Textbox.attr("choices"),b=b.split(/\|(?=\d+)/),i.push(b[0]),f=1;f<b.length-1;f++)h=b[f].indexOf("|"),i.push(b[f].substring(0,h)),i.push(b[f].substring(h+1));for(i.push(b[b.length-1]),e(a)&&(a=a.replace("|","||")),f=0;f<i.length;f+=2)if(c=g(i[f+1]),d=i[f],a===c||a===d){this.Textbox.val(d.replace("||","|"));break}return null!==c&&this.HiddenTextbox.val(c),this._updateReadOnlyLabel(this.GetValue()),this},N.prototype=Object.create(y.prototype),N.prototype.GetValue=function(){return a(this.Textbox).val()},N.prototype.SetValue=function(b){return a(this.Textbox).val(b),this._updateReadOnlyLabel(this.GetValue()),this},O.prototype=Object.create(N.prototype),O.prototype.GetValue=function(){return window.RTE_GetIFrameContents(this.Textbox.id)},O.prototype.SetValue=function(b){return a(this.Textbox).val(b),window.RTE_TransferTextAreaContentsToIFrame(this.Textbox.id),this._updateReadOnlyLabel(this.GetValue()),this},P.prototype=Object.create(y.prototype),P.prototype.GetValue=function(){return a(this.ContentDiv).html()},P.prototype.SetValue=function(b){return a(this.ContentDiv).html(b),a(this.Textbox).val(b),this._updateReadOnlyLabel(this.GetValue()),this},Q.prototype=Object.create(z.prototype),Q.prototype.GetValue=function(){return a(this.Textbox).val()+this.FileExtension},R.prototype=Object.create(y.prototype),R.prototype.GetValue=function(){var a,b,c=[];for(b=this.ListSelections.options.length,a=0;a<b;a+=1)c.push(this.ListSelections.options[a].text);return c},R.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValue().join("; "))},R.prototype.SetValue=function(b,c){d(c)&&(c=!0);var e,g,h,i,j,k;for(c?(h=this.ListChoices.options,j=this.ButtonAdd):(h=this.ListSelections.options,j=this.ButtonRemove),i=h.length,f(b)?(b=b.toString(),k="value"):k="text",e=0;e<i;e+=1){if(g=h[e],g[k]===b){g.selected=!0;break}g.selected=!1}return j.disabled="",a(j).click(),this._updateReadOnlyLabel(this.GetValue().join("; ")),this},S.prototype=Object.create(y.prototype),S.prototype.GetValue=function(){return a(this.upLevelDiv).text().replace(/^\s+|\u00A0|\s+$/g,"")},S.prototype.SetValue=function(b){return this.upLevelDiv.innerHTML=b,this.textareaDownLevelTextBox.innerHTML=b,c()&&a(this.txtHiddenSpanData).val(b),this.linkCheckNames.click(),this._updateReadOnlyLabel(this.GetValue()),this},T.prototype=Object.create(y.prototype),T.prototype.GetValue=function(){return this.ClientPeoplePicker.GetAllUserInfo()},T.prototype._getValueLinks=function(b){function c(a){var b={users:a.users};a.d.resolve(b)}function d(a){a.d.reject("Something went wrong...")}function e(b,e){for(var f=a.Deferred(),g=new SP.ClientContext.get_current,h=b.length,i=[],j=0;j<h;j++){var k=g.get_web().ensureUser(b[j]);g.load(k),i.push(k)}var l={d:f,loginNames:b,users:i};return g.executeQueryAsync(c.bind(e,l),d.bind(e,l)),f.promise()}var f=[],g=this;a.each(g.GetValue(),function(a,b){null!==b.Key&&f.push(b.Key)});var h=e(f,g);h.done(function(a){for(var c="",d=0;d<a.users.length;d++){var e=a.users[d];""!==c&&(c+="; "),c+='<a href="/_layouts/15/userdisp.aspx?ID='+e.get_id().toString()+'&amp;RootFolder=*">'+e.get_title()+"</a>"}return b(c)}),h.fail(function(a){var b=a;console.log(b)})},T.prototype._updateReadOnlyLabel=function(){var a=this;a.ReadOnlyLabel&&a.ReadOnlyLabel.html(a.GetValueString())},T.prototype.GetValueString=function(){return a.map(this.GetValue(),function(a){return a.DisplayText||a.AutoFillDisplayText}).join(", ")},T.prototype.SetValue=function(b){var c=this;return d(b)||null===b||""===b?this.GetValue().forEach(function(){c.ClientPeoplePicker.DeleteProcessedUser()}):this.ClientPeoplePicker.AllowMultipleUsers?b.split(";").forEach(function(b){a(c.EditorInput).val(b),c.ClientPeoplePicker.AddUnresolvedUserFromEditor(!0)}):(a(this.EditorInput).val(b),this.ClientPeoplePicker.AddUnresolvedUserFromEditor(!0)),this._updateReadOnlyLabel(),this},T.prototype.MakeReadOnly=function(){return this._makeReadOnly(""),this._updateReadOnlyLabel(),this},U.prototype=Object.create(y.prototype),U.prototype.GetValue=function(){if(null!==this.ClientTaxonomyWebTaggingControl){var a=this.ClientTaxonomyWebTaggingControl.getRawText();return a.length<1?[]:a.split(ba.termSeparator).map(function(a){var b=a.split(ba.termLabelSeparator);
return{label:b[0],guid:b[1]}})}return[]},U.prototype.GetValueString=function(){return this.GetValue().map(function(a){return a.label}).join(ba.termSeparator)},U.prototype.GetRawValue=function(){return null!==this.ClientTaxonomyWebTaggingControl?this.ClientTaxonomyWebTaggingControl.getRawText():""},U.prototype.SetValue=function(a){null!==this.ClientTaxonomyWebTaggingControl&&(this.ClientTaxonomyWebTaggingControl.setRawText(a),this.ClientTaxonomyWebTaggingControl.retrieveTerms())},U.prototype.MakeReadOnly=function(){return this._makeReadOnly(this.GetValueString())},V.prototype=Object.create(y.prototype),V.prototype.GetValue=function(){return a.trim(a(this.TextNode).text())},V.prototype.SetValue=function(a){return this.TextNode.nodeValue=a,this},V.prototype.MakeEditable=function(){return this},V.prototype.MakeReadOnly=function(){return this},W.prototype=Object.create(y.prototype),W.prototype.GetValue=function(){return a(this.Element).text()},W.prototype.SetValue=function(){return this},W.prototype.MakeEditable=function(){return this},W.prototype.MakeReadOnly=function(){return this};var ca={};return ca.Debug=function(){return!1},ca.GetSPField=function(a){v();var b=Z[a];if(d(b))throw"Unable to get a SPField named "+a;return null===b.spField&&(b.spField=Y(b)),b.spField},ca.GetSPFieldByInternalName=function(a){v();var b=$[a];if(d(b))throw"Unable to get a SPField with internal name "+a;return null===b.spField&&(b.spField=Y(b)),b.spField},ca.GetSPFields=function(){return v(),Z},ca.GetSPFieldsInternal=function(){return v(),$},ca.HideSPField=function(a){x(a,!1)},ca.ShowSPField=function(a){x(a,!0)},ca.IsDispForm=function(){return b()},ca.Setup=function(b){var c=a.extend({},ba,b);if("12HR"!==c.timeFormat&&"24HR"!==c.timeFormat)throw"Unable to set timeFormat, should be 12HR or 24HR.";return ba=c,c},ca.GetTimeFormat=function(){return ba.timeFormat},ca.SetTimeFormat=function(a){ca.Setup({timeFormat:a})},ca.GetDateSeparator=function(){return ba.dateSeparator},ca.SetDateSeparator=function(a){ca.Setup({dateSeparator:a})},ca.GetDecimalSeparator=function(){return ba.decimalSeparator},ca.SetDecimalSeparator=function(a){ca.Setup({decimalSeparator:a})},ca.GetThousandsSeparator=function(){return ba.thousandsSeparator},ca.SetThousandsSeparator=function(a){ca.Setup({thousandsSeparator:a})},ca}(jQuery);